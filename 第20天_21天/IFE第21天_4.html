<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">    
    <title>IFE ECMAScript</title>
</head>
<body>
<div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
<button id="fade-btn">淡出</button>
<script>
    // //setTimeout方式
    // let fade_btn = document.getElementById("fade-btn");     
    // let fade_obj = document.getElementById("fade-obj");
    // let i = 1;
    // let j = 0;
    // function fade_out(){
    //     if(i > 0.1) {
    //         fade_btn.disabled = true;
    //         i = i - 0.2;
    //         fade_obj.style.opacity = i; 
    //         setTimeout("fade_out()",1000);
    //     }
    //     else {
    //         fade_btn.innerText = "淡入";
    //         fade_btn.disabled = false;
    //         i = 1;
    //         j = 0;    
    //     }
    // }
    // function fade_in(){
    //     if(j < 1) {
    //         fade_btn.disabled = true;
    //         j = j + 0.1;
    //         fade_obj.style.opacity = j;
    //         setTimeout("fade_in()",1000);
    //     }
    //     else {
    //         fade_btn.innerText = "淡出";
    //         fade_btn.disabled = false;
    //         i = 1;
    //         j = 0;
    //     }
    // }
    
    // fade_btn.addEventListener("click",function(){
    //         if(fade_btn.innerText === "淡出") {
    //            fade_out();
    //         }
    //         else {
    //            fade_in();        
    //         }
    // },false);


    //setInterval方式
    let fade_btn = document.getElementById("fade-btn"); 
    let fade_obj = document.getElementById("fade-obj");
    let i = 1;
    let j = 0;
    let tmp1;
    let tmp2;
    fade_btn.addEventListener("click",function(){
        if(fade_btn.innerText === "淡出") { 
             tmp1 = window.setInterval("fade_out()",1000);
        }
        else {    
             tmp2 = window.setInterval("fade_in()",1000);   
        }
    },false); 
    function fade_out(){
       if(i > 0.1) {
            fade_btn.disabled = true;
            i = i - 0.2;
            fade_obj.style.opacity = i;
       }
       else {
            clearInterval(tmp1);
            fade_btn.disabled = false;
            fade_btn.innerText = "淡入";
            i = 1;
            j = 0;
       }
    } 
    function fade_in(){
        if(j < 1) {
            fade_btn.disabled = true;
            j = j + 0.2;
            fade_obj.style.opacity = j;
        }
        else {
            clearInterval(tmp2);
            fade_btn.disabled = false;
            fade_btn.innerText = "淡出";
            i = 1;
            j = 0;
        }
    }
</script>
</body>
</html>
